
$(function () {
  // Admin Panel settings

  //****************************
  /* This is for the mini-sidebar if width is less then 1170*/
  //****************************
  var setsidebartype = function () {
    var width =
      window.innerWidth > 0 ? window.innerWidth : window.screen.width;
    if (width < 1199) {
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
      $("#main-wrapper").addClass("mini-sidebar");
    } else {
      $("#main-wrapper").attr("data-sidebartype", "full");
      $("#main-wrapper").removeClass("mini-sidebar");
    }
  };
  $(window).ready(setsidebartype);
  $(window).on("resize", setsidebartype);
  //****************************
  /* This is for sidebartoggler*/
  //****************************
  $(".sidebartoggler").off("click").on("click", function (e) {
    e.preventDefault();
    var width = window.innerWidth > 0 ? window.innerWidth : window.screen.width;
    if (width < 1199) {
      $("#main-wrapper").toggleClass("show-sidebar");
      return;
    }

    $("#main-wrapper").toggleClass("mini-sidebar");
    if ($("#main-wrapper").hasClass("mini-sidebar")) {
      $(".sidebartoggler").prop("checked", !0);
      $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
    } else {
      $(".sidebartoggler").prop("checked", !1);
      $("#main-wrapper").attr("data-sidebartype", "full");
    }
  });

  // Explicit mobile close behavior.
  $("#sidebarCollapse").off("click").on("click", function (e) {
    e.preventDefault();
    $("#main-wrapper").removeClass("show-sidebar");
  });

  // Close sidebar after selecting a menu item on mobile.
  $("#sidebarnav a").on("click", function () {
    var width = window.innerWidth > 0 ? window.innerWidth : window.screen.width;
    if (width < 1199) {
      $("#main-wrapper").removeClass("show-sidebar");
    }
  });

  $(document).on("click", function (e) {
    var width = window.innerWidth > 0 ? window.innerWidth : window.screen.width;
    if (width >= 1199 || !$("#main-wrapper").hasClass("show-sidebar")) return;
    if ($(e.target).closest(".left-sidebar, #headerCollapse").length) return;
    $("#main-wrapper").removeClass("show-sidebar");
  });
})
